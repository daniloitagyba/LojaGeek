@model LojaGeek.Model.DB.Model.Produto

@{
    ViewBag.Title = "Detalhes";
}

<h2>Detalhes</h2>

<div>
    <h4>Produto</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            Nome
        </dt>

        <dd>
            @ViewBag.Produto.Nome
        </dd>

        <dt>
            Descrição
        </dt>

        <dd>
            @ViewBag.Produto.Descricao
        </dd>

        <dt>
            Quantidade no estoque
        </dt>

        <dd>
            @ViewBag.Produto.QuantidadeEstoque
        </dd>

        <dt>
            Preço Unitário
        </dt>

        <dd>
            @ViewBag.Produto.PrecoUnitario
        </dd>

        <dt>
            Foto
        </dt>

        <dd>
            @if (@ViewBag.Produto.Foto != null)
            {
                <img src="#" alt="imagem do produto" />
            }
            else
            {
                <img src="~/Images/image-not-found.jpg" alt="Imagem não encontrada" height="200px" width="200px" />
            }
        </dd>

        @using (Html.BeginForm("GravarComentario", "Comentario", FormMethod.Post))
        {
            <div class="form-group">
                <label for="comentario">Adicione seu comentário aqui:</label>
                <textarea class="form-control" rows="5" name="comentario"></textarea>
            </div>

            <div class="form-group">
                <input type="text" name="nome" placeholder="Qual o seu nome ?" required />
            </div>

            <input type="hidden" name="idProduto" value="@ViewBag.produto.Id" />

            <input type="submit" class="btn btn-md btn-primary btn-block" value="Enviar comentário">
        }

    </dl>
</div>
<hr />

<h2>Comentários</h2>
@foreach (var item in @ViewBag.comentarios)
{
    if (@item.Produto.Id == @ViewBag.produto.Id)
    {
        <div class="container">
            <h4>@item.Nome</h4>
            <p>@item.Coment</p>
        </div>
    }
}

<hr />
<p>
    @Html.ActionLink("Voltar a página principal", "Index", "Home")
</p>
